<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Categories</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&display=swap&family=Raleway:wght@400;700&display=swap"
    rel="stylesheet">
  <!-- Favicons -->
  <link rel="icon" href="/assests/favicon.png" type="image/x-icon" sizes="any">
  <link rel="icon" href="/assests/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/assests/apple-touch-icon.png">
  <link rel="manifest" href="/assests/site.webmanifest">
  <meta name="theme-color" content="#ffffff">

  <link rel="stylesheet" href="styles/contantUs.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles/styles.css">
  <link rel="stylesheet" href="/styles/category.css">
  <link rel="stylesheet" href="/styles/navbar.css">
  <link rel="stylesheet" href="/styles/footer.css">


</head>

<body>
  <!-- Page Loader -->
  <div id="page-loader" class="page-loader">
    <h1 class="slide-in">AsUsual</h1>
    <div class="spinner"></div>
  </div>
  <!-- this is the responsive navbar -->
  <!-- ✅ Navbar include -->
  <%- include('../partials/navbar', { user: user, cartCount: cartCount }) %>

    <section class="categorical-section">
      <h1 style="text-align:center; color:white; font-family:'Raleway', sans-serif; font-weight:700;">✨ Explore Our
        Categories ✨</h1>
      <div id="categorical-app">
        <% if (categories && categories.length> 0) { %>
          <div class="categorical-grid-container">
            <% categories.forEach((cat)=> { %>
              <a href="/category/<%= cat._id %>" style="text-decoration:none; color:inherit;">
                <div class="categorical-card-wrap" data-image="<%= cat.Image %>">
                  <div class="categorical-card">
                    <div class="categorical-card-bg" style="background-image: url('<%= cat.Image %>');"></div>
                    <div class="categorical-card-info">
                      <h1>
                        <%= cat.name %>
                      </h1>
                      <p>
                        <%= cat.description || "Explore our latest collection." %>
                      </p>
                    </div>
                  </div>
                </div>
              </a>
              <% }) %>

          </div>
          <% } else { %>
            <p style="color:white; text-align:center;">No categories available</p>
            <% } %>
      </div>
    </section>

    <!-- ✅ Footer include -->
    <%- include('../partials/footer') %>

      <!-- 3D Hover Interaction Script -->
      <script>
        document.querySelectorAll('.categorical-card-wrap').forEach(cardWrap => {
          const card = cardWrap.querySelector('.categorical-card');
          const cardBg = card.querySelector('.categorical-card-bg');
          const img = cardWrap.getAttribute('data-image');
          cardBg.style.backgroundImage = `url(${img})`;

          let width = cardWrap.offsetWidth;
          let height = cardWrap.offsetHeight;

          cardWrap.addEventListener('mousemove', e => {
            const x = e.offsetX;
            const y = e.offsetY;
            const rotateY = ((x / width) - 0.5) * 30;
            const rotateX = ((y / height) - 0.5) * -20;
            card.style.transform = `rotateY(${rotateY}deg) rotateX(${rotateX}deg)`;
            cardBg.style.backgroundPosition = `${50 - (x / width) * 10}% ${50 - (y / height) * 10}%`;
          });

          cardWrap.addEventListener('mouseleave', () => {
            card.style.transform = `rotateY(0deg) rotateX(0deg)`;
            cardBg.style.transform = `translateX(0px) translateY(0px)`;
          });
        });
      </script>
      <script src="scripts/script.js"></script>
      <script src="https://unpkg.com/feather-icons"></script>
      <script>
        feather.replace();
      </script>

      <script>
        window.addEventListener("load", function () {
          const loader = document.getElementById("page-loader");
          if (loader) {
            loader.classList.add("fade-out");
            setTimeout(() => (loader.style.display = "none"), 500);
          }
        });
      </script>
</body>

</html>